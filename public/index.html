<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting AI Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/fontawesome/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header with Audio Source -->
        <header class="header-combined">
            <div class="header-top">
                <div class="header-left">
                    <div>
                        <h1 class="logo">
                            <i class="fas fa-microphone-alt logo-icon"></i>
                            Meeting AI Assistant
                        </h1>
                        <p class="subtitle">Real-time transcription & AI-powered suggestions</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="status-indicator ready" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span class="status-text">Ready</span>
                    </div>
                    <div class="header-duration">
                        <i class="fas fa-clock"></i>
                        <span id="duration">00:00</span>
                    </div>
                    <button class="btn btn-primary btn-icon-circle" id="startBtn" title="Start Recording">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="btn btn-danger btn-icon-circle" id="stopBtn" disabled title="Stop Recording">
                        <i class="fas fa-stop"></i>
                    </button>
                    <button class="btn-icon-only" id="settingsBtn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="btn-icon-only" id="helpBtn" title="How to use">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </div>
        </header>


        <!-- Main Content -->
        <div class="main-content">
            <!-- Transcription Panel -->
            <div class="panel transcription-panel">
                <div class="panel-header">
                    <div>
                        <h2 class="panel-title">
                            <i class="fas fa-file-alt panel-icon"></i>
                            Live Transcription
                        </h2>
                        <p class="panel-description">Real-time speech-to-text powered by Whisper AI</p>
                    </div>
                    <div class="panel-actions">
                        <button class="btn-icon-only" id="downloadTranscriptBtn" title="Download transcript as PDF">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="btn-icon-only" id="clearTranscriptBtn" title="Clear all transcriptions">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content" id="transcriptionContent">
                    <div class="empty-state">
                        <i class="fas fa-microphone empty-icon"></i>
                        <h3 class="empty-title">No Transcriptions Yet</h3>
                        <p class="empty-description">Click "Start Recording" to begin capturing and transcribing audio</p>
                        <div class="empty-hint">
                            <i class="fas fa-info-circle"></i>
                            <span>Transcriptions appear every 3 seconds</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Suggestions Panel -->
            <div class="panel suggestions-panel" id="suggestionsPanel">
                <div class="panel-header">
                    <div>
                        <h2 class="panel-title">
                            <i class="fas fa-lightbulb panel-icon"></i>
                            AI Suggestions
                        </h2>
                        <p class="panel-description">Smart insights powered by ChatGPT</p>
                    </div>
                    <div class="panel-actions">
                        <button class="btn-icon-only" id="downloadCompleteSummaryBtn" title="Download complete meeting summary with AI insights">
                            <i class="fas fa-file-pdf"></i>
                        </button>
                        <button class="btn-icon-only" id="downloadSuggestionsBtn" title="Download suggestions as PDF">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="btn-icon-only" id="fullscreenBtn" title="View in fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button class="btn-icon-only" id="clearSuggestionsBtn" title="Clear all suggestions">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="panel-content" id="suggestionsContent">
                    <div class="empty-state">
                        <i class="fas fa-robot empty-icon"></i>
                        <h3 class="empty-title">No Suggestions Yet</h3>
                        <p class="empty-description">AI will generate helpful suggestions based on your conversation</p>
                        <div class="suggestion-types">
                            <div class="suggestion-type-item">
                                <i class="fas fa-question-circle"></i>
                                <span>Questions</span>
                            </div>
                            <div class="suggestion-type-item">
                                <i class="fas fa-link"></i>
                                <span>Resources</span>
                            </div>
                            <div class="suggestion-type-item">
                                <i class="fas fa-tasks"></i>
                                <span>Actions</span>
                            </div>
                            <div class="suggestion-type-item">
                                <i class="fas fa-brain"></i>
                                <span>Insights</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Processing Indicator -->
        <div class="processing-indicator" id="processingIndicator">
            <div class="spinner"></div>
            <span id="processingText">Processing...</span>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìñ How to Use - Meeting AI Assistant</h2>
                    <button class="modal-close" id="closeHelpModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="help-section">
                        <h3>üéØ System Audio Capture</h3>
                        <div class="mode-card">
                            <h4>Desktop Application Features</h4>
                            <ul>
                                <li>‚úÖ Captures ALL meeting participants automatically</li>
                                <li>‚úÖ Works with Zoom, Google Meet, Microsoft Teams, Slack</li>
                                <li>‚úÖ System-level audio capture (no browser limitations)</li>
                                <li>‚úÖ Floating panel for real-time suggestions</li>
                                <li>‚úÖ Auto-start recording when meetings begin</li>
                            </ul>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üìã Step-by-Step Instructions</h3>
                        <ol class="help-steps">
                            <li>
                                <strong>Click "Start Recording"</strong>
                                <p>The button will turn red when recording starts</p>
                            </li>
                            <li>
                                <strong>System Audio Capture</strong>
                                <p>‚Ä¢ The app automatically captures system audio</p>
                                <p>‚Ä¢ Works with Zoom, Meet, Teams, Slack, and other meeting apps</p>
                                <p>‚Ä¢ No additional setup required</p>
                            </li>
                            <li>
                                <strong>Start Talking!</strong>
                                <p>‚Ä¢ Transcriptions appear in real-time</p>
                                <p>‚Ä¢ AI suggestions generate automatically</p>
                                <p>‚Ä¢ All participants' audio is captured</p>
                            </li>
                            <li>
                                <strong>Click "Stop" When Done</strong>
                                <p>‚Ä¢ Meeting summary PDF is generated</p>
                                <p>‚Ä¢ Download transcripts and suggestions anytime</p>
                            </li>
                        </ol>
                    </div>

                    <div class="help-section">
                        <h3>üí° Tips & Tricks</h3>
                        <ul class="help-tips">
                            <li>üñ•Ô∏è <strong>Desktop App:</strong> Captures all system audio automatically</li>
                            <li>üîä <strong>Audio Quality:</strong> Make sure meeting volume is audible</li>
                            <li>üì• <strong>Download:</strong> Use download buttons to save transcripts/suggestions as PDF</li>
                            <li>üóëÔ∏è <strong>Clear Context:</strong> Clear AI context to start fresh suggestions</li>
                            <li>üí∞ <strong>Cost Tracking:</strong> Monitor API costs in real-time at the top</li>
                            <li>‚öôÔ∏è <strong>Settings:</strong> Press Cmd/Ctrl+, to configure API keys and preferences</li>
                        </ul>
                    </div>

                    <div class="help-section">
                        <h3>üîß Troubleshooting</h3>
                        <div class="troubleshooting">
                            <p><strong>‚ùå No audio captured?</strong></p>
                            <p>‚Üí Check system audio settings and ensure meeting audio is playing</p>
                            
                            <p><strong>‚ùå No transcriptions appearing?</strong></p>
                            <p>‚Üí Verify audio is playing and system audio capture is enabled</p>
                            
                            <p><strong>‚ùå AI suggestions not showing?</strong></p>
                            <p>‚Üí Speak more (needs ~100 characters of text to trigger)</p>
                            
                            <p><strong>‚ùå Settings not opening?</strong></p>
                            <p>‚Üí Use keyboard shortcut: Cmd+, (Mac) or Ctrl+, (Windows/Linux)</p>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>‚öôÔ∏è Features</h3>
                        <ul class="help-features">
                            <li>üé§ Real-time audio transcription (Whisper AI)</li>
                            <li>ü§ñ AI-powered suggestions (ChatGPT)</li>
                            <li>‚ùì Smart questions to ask</li>
                            <li>üîó Relevant resource links</li>
                            <li>‚úÖ Action items extraction</li>
                            <li>üí≠ Key insights summary</li>
                            <li>üìÑ PDF export (transcripts & suggestions)</li>
                            <li>üíæ Meeting history with full data</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Socket.io Client -->
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
